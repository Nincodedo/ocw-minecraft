FROM alpine:3.18.2
RUN mkdir -p /app/ocw-minecraft /config /data/defaultconfigs
WORKDIR /app
RUN apk --no-cache add docker=23.0.6-r2 docker-cli-compose=2.17.3-r2 curl=8.1.2-r0 jq=1.6-r3
COPY docker-compose.yaml /app/ocw-minecraft/docker-compose.yaml
COPY *.env /app/ocw-minecraft/
COPY rhc/scripts/*.sh /app/
SHELL ["/bin/ash", "-eo", "pipefail", "-c"]
RUN find /app -type f -print0 | xargs -0 dos2unix --
LABEL org.opencontainers.image.source="https://github.com/Nincodedo/rhc-ocw"
ENTRYPOINT ["sh", "/app/resetWorld.sh"]
